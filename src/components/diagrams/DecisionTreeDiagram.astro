---
// Diagramme: Arbre de d√©cision IDOR
// Simplifi√© et plus lisible
---

<div class="diagram-container">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 400" class="decision-diagram">
    <defs>
      <filter id="glow-cyan-dt" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="3" result="blur"/>
        <feFlood flood-color="#06b6d4" flood-opacity="0.4"/>
        <feComposite in2="blur" operator="in"/>
        <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
      <filter id="glow-green-dt" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="3" result="blur"/>
        <feFlood flood-color="#22c55e" flood-opacity="0.4"/>
        <feComposite in2="blur" operator="in"/>
        <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
      <filter id="glow-red-dt" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="3" result="blur"/>
        <feFlood flood-color="#ef4444" flood-opacity="0.4"/>
        <feComposite in2="blur" operator="in"/>
        <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
      <filter id="glow-amber-dt" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="3" result="blur"/>
        <feFlood flood-color="#f59e0b" flood-opacity="0.4"/>
        <feComposite in2="blur" operator="in"/>
        <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
      
      <pattern id="grid-dt" width="25" height="25" patternUnits="userSpaceOnUse">
        <path d="M 25 0 L 0 0 0 25" fill="none" stroke="rgba(100,100,140,0.06)" stroke-width="0.5"/>
      </pattern>
      
      <marker id="arrow-dt" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10" fill="none" stroke="#64748b" stroke-width="1.5"/>
      </marker>
    </defs>
    
    <!-- Background -->
    <rect width="700" height="400" fill="#0c0c14" rx="8"/>
    <rect width="700" height="400" fill="url(#grid-dt)" rx="8"/>
    
    <!-- Title -->
    <text x="350" y="28" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="600">Quand continuer vs pivoter ?</text>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- LEFT COLUMN: CONTINUE (green signals)      -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <g transform="translate(175, 60)">
      <rect x="-145" y="0" width="290" height="160" rx="8" fill="#0f1520" stroke="#22c55e" stroke-width="2" filter="url(#glow-green-dt)"/>
      <text x="0" y="28" text-anchor="middle" fill="#22c55e" font-size="13" font-weight="700">üéØ CONTINUER</text>
      <line x1="-125" y1="42" x2="125" y2="42" stroke="#14532d" stroke-width="1"/>
      
      <text x="-125" y="65" fill="#86efac" font-size="10">‚Ä¢ IDs s√©quentiels (1, 2, 3...)</text>
      <text x="-125" y="85" fill="#86efac" font-size="10">‚Ä¢ Auth custom / JWT maison</text>
      <text x="-125" y="105" fill="#86efac" font-size="10">‚Ä¢ Erreurs verbeuses (user 123 not found)</text>
      <text x="-125" y="125" fill="#86efac" font-size="10">‚Ä¢ App legacy ou startup early-stage</text>
      <text x="-125" y="145" fill="#86efac" font-size="10">‚Ä¢ UUID v1 d√©tect√©</text>
    </g>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- RIGHT COLUMN: PIVOT (red signals)          -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <g transform="translate(525, 60)">
      <rect x="-145" y="0" width="290" height="160" rx="8" fill="#0f1520" stroke="#ef4444" stroke-width="2" filter="url(#glow-red-dt)"/>
      <text x="0" y="28" text-anchor="middle" fill="#ef4444" font-size="13" font-weight="700">‚è≠Ô∏è PIVOTER</text>
      <line x1="-125" y1="42" x2="125" y2="42" stroke="#7f1d1d" stroke-width="1"/>
      
      <text x="-125" y="65" fill="#fca5a5" font-size="10">‚Ä¢ UUID v4 partout, aucun leak</text>
      <text x="-125" y="85" fill="#fca5a5" font-size="10">‚Ä¢ R√©ponses uniformes (404 syst√©matique)</text>
      <text x="-125" y="105" fill="#fca5a5" font-size="10">‚Ä¢ Rate limiting agressif</text>
      <text x="-125" y="125" fill="#fca5a5" font-size="10">‚Ä¢ App moderne, framework mature</text>
      <text x="-125" y="145" fill="#fca5a5" font-size="10">‚Ä¢ 4h+ sans r√©sultat</text>
    </g>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- BOTTOM: Quick decision guide               -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <g transform="translate(350, 245)">
      <rect x="-320" y="0" width="640" height="130" rx="8" fill="#0f1520" stroke="#f59e0b" stroke-width="2" filter="url(#glow-amber-dt)"/>
      <text x="0" y="25" text-anchor="middle" fill="#f59e0b" font-size="12" font-weight="700">Checklist rapide</text>
      <line x1="-300" y1="38" x2="300" y2="38" stroke="#78350f" stroke-width="1"/>
      
      <!-- Left checklist -->
      <text x="-300" y="60" fill="#fbbf24" font-size="10" font-weight="600">Avant de tester :</text>
      <text x="-300" y="78" fill="#94a3b8" font-size="9">‚ñ° Type d'ID identifi√© ?</text>
      <text x="-300" y="94" fill="#94a3b8" font-size="9">‚ñ° 2 comptes de test pr√™ts ?</text>
      <text x="-300" y="110" fill="#94a3b8" font-size="9">‚ñ° Scope v√©rifi√© ?</text>
      
      <!-- Middle checklist -->
      <text x="-60" y="60" fill="#fbbf24" font-size="10" font-weight="600">Pendant le test :</text>
      <text x="-60" y="78" fill="#94a3b8" font-size="9">‚ñ° Tous les verbes HTTP ?</text>
      <text x="-60" y="94" fill="#94a3b8" font-size="9">‚ñ° Headers custom v√©rifi√©s ?</text>
      <text x="-60" y="110" fill="#94a3b8" font-size="9">‚ñ° Body params test√©s ?</text>
      
      <!-- Right checklist -->
      <text x="180" y="60" fill="#fbbf24" font-size="10" font-weight="600">Avant de reporter :</text>
      <text x="180" y="78" fill="#94a3b8" font-size="9">‚ñ° Impact max explor√© ?</text>
      <text x="180" y="94" fill="#94a3b8" font-size="9">‚ñ° Cha√Æne d'exploitation ?</text>
      <text x="180" y="110" fill="#94a3b8" font-size="9">‚ñ° PoC reproductible ?</text>
    </g>
  </svg>
</div>

<style>
  .diagram-container {
    margin: 2rem 0;
    overflow-x: auto;
    padding: 0.5rem 0;
  }
  
  .decision-diagram {
    width: 100%;
    min-width: 500px;
    max-width: 700px;
    margin: 0 auto;
    display: block;
  }
</style>
